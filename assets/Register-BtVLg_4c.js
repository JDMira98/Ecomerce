import{j as e,r as o,u as b,a as N,c as w,b as y,U as E,P as S}from"./index-DU_I5m21.js";import{R as C}from"./auth.service-Lhmbm5je.js";const R=({message:r,type:n})=>{const l=()=>{switch(n){case"success":return"bg-success";case"error":return"bg-danger";case"warning":return"bg-warning";default:return""}};return e.jsx("div",{className:`alert-container ${l()}`,children:e.jsxs("div",{className:"alert-content text-white p-3 rounded shadow-sm",children:[e.jsxs("strong",{children:[n.charAt(0).toUpperCase()+n.slice(1),": "]}),r]})})},A=()=>{const[r,n]=o.useState({id:0,name:"",email:"",password:"",phone:"",role:"User",active:1}),[l,s]=o.useState(""),[h,t]=o.useState(!1),[p,i]=o.useState(""),[f,m]=o.useState("success"),u=b(),g=N(),c=d=>{const{id:a,value:v}=d.target;n({...r,[a]:v})};o.useEffect(()=>{w(E),u(y())},[u]);const x=()=>r.name.trim()===""?(s("El nombre es obligatorio."),!1):/\S+@\S+\.\S+/.test(r.email)?!/^\d+$/.test(r.phone)||r.phone.length<10?(s("Por favor ingresa un número de teléfono válido."),!1):r.password.length<6?(s("La contraseña debe tener al menos 6 caracteres."),!1):(s(""),!0):(s("Por favor ingresa un correo válido."),!1),j=async d=>{if(d.preventDefault(),!!x())try{const a=await C(r);if(console.log(a),a==="Error: email already exists."){s("El correo ya está registrado."),m("error"),i("El correo ya está registrado."),t(!0),setTimeout(()=>{t(!1)},3e3);return}a==="User created successfully."&&(m("success"),i("Usuario creado correctamente."),t(!0),setTimeout(()=>{t(!1),g(`/${S.LOGIN}`,{replace:!0})},3e3))}catch(a){console.error("Register failed:",a),s("Error al registrarse. Por favor intenta de nuevo."),m("error"),i("Error al registrarse. Inténtalo de nuevo."),t(!0),setTimeout(()=>{t(!1)},3e3)}};return e.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100",children:e.jsxs("div",{className:"col-md-4 principalContainer",children:[e.jsx("h3",{className:"text-center",children:"Registrarse"}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{htmlFor:"name",children:"Nombre"}),e.jsx("input",{type:"text",className:"form-control",id:"name",placeholder:"Nombre completo",value:r.name,onChange:c})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",id:"email",placeholder:"Enter email",value:r.email,onChange:c})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{htmlFor:"phone",children:"Teléfono"}),e.jsx("input",{type:"text",className:"form-control",id:"phone",placeholder:"Teléfono",value:r.phone,onChange:c})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",className:"form-control",id:"password",placeholder:"Crea una contraseña",value:r.password,onChange:c})]}),l&&e.jsx("p",{className:"text-danger",children:l}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100",children:"Registrarse"})]}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs("p",{children:["¿Ya tienes una cuenta? ",e.jsx("a",{href:"/Login",children:"Iniciar sesión."})]})}),h&&e.jsx(R,{message:p,type:f})]})})};export{A as default};
