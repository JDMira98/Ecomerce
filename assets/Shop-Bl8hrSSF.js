import{r,j as s,N as v,G as N,i as y}from"./index-C4RmwaTK.js";import{R as C,S}from"./StoreItem-BrqxD_u0.js";import{F as d}from"./Form-DKdaOfKv.js";import{C as P}from"./Col-CN402Iio.js";import"./Card-C7lH4Ily.js";const G=()=>{const[m,u]=r.useState([]),[g,h]=r.useState([]),[c,p]=r.useState("all"),[i,f]=r.useState("");r.useEffect(()=>{async function e(){try{const[a,n]=await Promise.all([N(0),y(0)]);if(a.products.length>0){const x=a.products.map(t=>{let o;if(typeof t.images=="string")try{o=JSON.parse(t.images)}catch(j){console.error("Error parsing images:",j),o=[]}else o=t.images;return{...t,images:o}}).filter(t=>t.active===1&&t.images.length>0);u(x)}n.categories.length>0&&h(n.categories)}catch(a){console.error("Error fetching data:",a)}}e()},[]);const l=m.filter(e=>c==="all"?!0:e.category===c).filter(e=>e.name.toLowerCase().includes(i.toLowerCase()));return s.jsxs(s.Fragment,{children:[s.jsx(v,{}),s.jsxs("div",{className:"shop-container",children:[s.jsx("h2",{className:"shop-title",children:"Todos nuestros productos."}),s.jsx("div",{style:{marginBottom:"20px"},className:"search-section",children:s.jsx(d.Control,{type:"text",placeholder:"Buscar productos",value:i,onChange:e=>f(e.target.value),className:"product-search"})}),s.jsx("div",{className:"filter-section",children:s.jsxs(d.Select,{"aria-label":"Filter by category",onChange:e=>p(e.target.value),className:"category-select",children:[s.jsx("option",{value:"all",children:"Todas las categorías"}),g.filter(e=>e.active===1).map(e=>s.jsx("option",{value:e.name,children:e.name},e.id))]})}),s.jsx(C,{className:"product-grid",children:l.length>0?l.filter(e=>e.active===1).map(e=>s.jsx(P,{xs:12,md:6,lg:4,className:"product-item",children:s.jsx(S,{...e})},e.id)):s.jsx("p",{children:"No hay productos que coincidan con la búsqueda"})})]})]})};export{G as default};
