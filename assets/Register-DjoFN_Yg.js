import{r as o,u as b,a as N,c as y,b as w,j as e,U as E,R as S,P as C}from"./index-DE4PCHGs.js";import{A as R}from"./Alert-D2mRHDYM.js";const A=()=>{const[r,d]=o.useState({id:0,name:"",email:"",password:"",phone:"",role:"User",active:1}),[m,s]=o.useState(""),[p,t]=o.useState(!1),[h,n]=o.useState(""),[f,i]=o.useState("success"),u=b(),g=N(),l=c=>{const{id:a,value:v}=c.target;d({...r,[a]:v})};o.useEffect(()=>{y(E),u(w())},[u]);const x=()=>r.name.trim()===""?(s("El nombre es obligatorio."),!1):/\S+@\S+\.\S+/.test(r.email)?!/^\d+$/.test(r.phone)||r.phone.length<10?(s("Por favor ingresa un número de teléfono válido."),!1):r.password.length<6?(s("La contraseña debe tener al menos 6 caracteres."),!1):(s(""),!0):(s("Por favor ingresa un correo válido."),!1),j=async c=>{if(c.preventDefault(),!!x())try{const a=await S(r);if(console.log(a),a==="Error: email already exists."){s("El correo ya está registrado."),i("error"),n("El correo ya está registrado."),t(!0),setTimeout(()=>{t(!1)},3e3);return}a==="User created successfully."&&(i("success"),n("Usuario creado correctamente."),t(!0),setTimeout(()=>{t(!1),g(`/${C.LOGIN}`,{replace:!0})},3e3))}catch(a){console.error("Register failed:",a),s("Error al registrarse. Por favor intenta de nuevo."),i("error"),n("Error al registrarse. Inténtalo de nuevo."),t(!0),setTimeout(()=>{t(!1)},3e3)}};return e.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100",children:e.jsxs("div",{className:"col-md-4 principalContainer",children:[e.jsx("h3",{className:"text-center",children:"Registrarse"}),e.jsxs("form",{autoComplete:"off",onSubmit:j,children:[e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{htmlFor:"name",children:"Nombre"}),e.jsx("input",{type:"text",className:"form-control input",id:"name",placeholder:"Nombre completo",value:r.name,onChange:l})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",className:"form-control input",id:"email",placeholder:"Enter email",value:r.email,onChange:l})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{htmlFor:"phone",children:"Teléfono"}),e.jsx("input",{type:"text",className:"form-control input",id:"phone",placeholder:"Teléfono",value:r.phone,onChange:l})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",autoComplete:"new-password",className:"form-control input",id:"password",placeholder:"Crea una contraseña",value:r.password,onChange:l})]}),m&&e.jsx("p",{className:"text-danger",children:m}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100",children:"Registrarse"})]}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs("p",{children:["¿Ya tienes una cuenta? ",e.jsx("a",{href:"#/login",children:"Iniciar sesión."})]})}),p&&e.jsx(R,{message:h,type:f})]})})};export{A as default};
