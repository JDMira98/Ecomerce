import{p as C,r as u,j as e,N as f,L as g,q as m,B as b,G as v}from"./index-C4RmwaTK.js";import{F as t}from"./Form-DKdaOfKv.js";import"./Col-CN402Iio.js";const G=()=>{const{cartItems:d}=C(),[i,p]=u.useState([]),[n,h]=u.useState({nombreCompleto:"",cedula:"",telefono:"",direccion:"",ciudad:"",departamento:""});u.useEffect(()=>{async function o(){try{if(d.length>0){const r=d.map(c=>c.id),l=(await v(0)).products.filter(c=>r.includes(c.id));p(l)}}catch(r){console.error("Error fetching products:",r)}}o()},[d]);const s=o=>{const{name:r,value:a}=o.target;h({...n,[r]:a})},x=o=>{o.preventDefault(),console.log("Datos del formulario:",n)},j=i.reduce((o,r)=>{const a=d.find(l=>l.id===r.id);return o+(a?r.price*a.quantity:0)},0);return e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsxs("div",{className:"pedido-container",children:[e.jsx("h2",{children:"Detalle del Pedido"}),i.length>0?i.map(o=>{const r=d.find(a=>a.id===o.id);return e.jsxs("div",{className:"pedido-detalle",children:[e.jsx(g,{to:`/product/${o.id}`,children:e.jsx("img",{src:JSON.parse(o.images)[0],alt:o.name,className:"pedido-imagen"})}),e.jsx("h3",{children:o.name}),e.jsxs("p",{children:["Cantidad: ",r==null?void 0:r.quantity]})," ",e.jsxs("p",{children:["Precio Unitario: ",m(o.price)]})]},o.id)}):e.jsx("p",{children:"Cargando detalles del producto..."}),e.jsx("p",{className:"envio-gratis",children:"¡Envío Gratis!"}),e.jsxs("p",{className:"total",children:["Total: ",m(j)]}),e.jsxs(t,{onSubmit:x,className:"pedido-form",children:[e.jsx("h3",{children:"Datos de Envío"}),e.jsxs(t.Group,{controlId:"nombreCompleto",children:[e.jsx(t.Label,{children:"Nombre Completo"}),e.jsx(t.Control,{type:"text",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0})]}),e.jsxs(t.Group,{controlId:"cedula",children:[e.jsx(t.Label,{children:"Cédula"}),e.jsx(t.Control,{type:"text",name:"cedula",value:n.cedula,onChange:s,required:!0})]}),e.jsxs(t.Group,{controlId:"telefono",children:[e.jsx(t.Label,{children:"Teléfono"}),e.jsx(t.Control,{type:"text",name:"telefono",value:n.telefono,onChange:s,required:!0})]}),e.jsxs(t.Group,{controlId:"direccion",children:[e.jsx(t.Label,{children:"Dirección"}),e.jsx(t.Control,{type:"text",name:"direccion",value:n.direccion,onChange:s,required:!0})]}),e.jsxs(t.Group,{controlId:"ciudad",children:[e.jsx(t.Label,{children:"Ciudad"}),e.jsx(t.Control,{type:"text",name:"ciudad",value:n.ciudad,onChange:s,required:!0})]}),e.jsxs(t.Group,{controlId:"departamento",children:[e.jsx(t.Label,{children:"Departamento"}),e.jsx(t.Control,{type:"text",name:"departamento",value:n.departamento,onChange:s,required:!0})]}),e.jsx(b,{className:"w-100 toBuybutton",type:"submit",children:"Confirmar Pedido"})]})]})]})};export{G as default};
