import{u as U,f as d,r,c as E,U as A,g as w,j as e,h as C,N as D,S as P,G as F,i as T,k as q}from"./index-apqPWkAR.js";import{A as G}from"./Alert-D9qDHqhC.js";const z=()=>{const h=U(),l=d(a=>a.user.id),i=d(a=>a.user.rol),[f,p]=r.useState(!0),[c,n]=r.useState(null),[x,u]=r.useState(!1),[j,N]=r.useState(""),[b,g]=r.useState("success"),[t,m]=r.useState({id:0,name:"",email:"",phone:""});r.useEffect(()=>{l!==0?(async()=>{try{const s=await F(l);s.users&&s.users.length>0?m({id:s.users[0].id,name:s.users[0].name,email:s.users[0].email,phone:s.users[0].phone}):n("No se encontraron datos del usuario")}catch(s){n("Error al cargar el perfil: "+s)}finally{p(!1)}})():E(A)},[l]);const o=a=>{const{name:s,value:v}=a.target;m(S=>({...S,[s]:v}))},y=async a=>{a.preventDefault();try{await h(T(t)),await q(t)==="User updated successfully."&&(g("success"),N("Usuario actualizado correctamente."),u(!0),setTimeout(()=>{u(!1)},3e3))}catch(s){n("Error al actualizar el perfil: "+s)}};return i!==w.ADMIN?e.jsx(C,{replace:!0,to:"../"}):f?e.jsx("div",{children:"Cargando perfil..."}):c?e.jsxs("div",{children:["Error: ",c]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{}),e.jsxs("div",{className:"d-flex",children:[e.jsx(P,{userRole:i}),e.jsxs("div",{className:"container mt-5 d-flex justify-content-center align-items-top",children:[e.jsxs("div",{className:"profile-form-container",children:[e.jsx("h1",{className:"text-center",children:"Perfil de Usuario"}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"Nombre"}),e.jsx("input",{type:"text",className:"form-control",id:"name",name:"name",value:t.name,onChange:o,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",id:"email",name:"email",value:t.email,onChange:o,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"phone",className:"form-label",children:"Tel√©fono"}),e.jsx("input",{type:"tel",className:"form-control",id:"phone",name:"phone",value:t.phone,onChange:o,required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100",children:"Guardar Cambios"})]})]}),x&&e.jsx(G,{message:j,type:b})]})]})]})};export{z as default};
